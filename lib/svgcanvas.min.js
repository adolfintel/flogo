function toString(e){return e?typeof e=="string"?e:e+"":e}class ImageUtils{async svg2canvas(e,t,n){const o=await new Promise(t=>{var n=new Image;n.onload=function(){t(n)},n.src=e});var s=document.createElement("canvas");s.width=t,s.height=n;const i=s.getContext("2d");return i.drawImage(o,0,0),s}toDataURL(e,t,n,s,o,i){var r,c,a=(new XMLSerializer).serializeToString(e),l=document.documentMode;if(l&&(c=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,c.test(a)&&(a=a.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink'))),i||(i={}),r="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a),s==="image/svg+xml"||!s)return i.async?Promise.resolve(r):r;if(s==="image/jpeg"||s==="image/png"){if(!i.async)throw new Error("svgcanvas: options.async must be set to true if type is image/jpeg | image/png");return(async()=>{const e=await this.svg2canvas(r,t,n),i=e.toDataURL(s,o);return e.remove(),i})()}throw new Error("svgcanvas: Unknown type for toDataURL, please use image/jpeg | image/png | image/svg+xml.")}getImageData(e,t,n,s,o,i,a,r){if(r||(r={}),!r.async)throw new Error("svgcanvas: options.async must be set to true for getImageData");const c=this.toDataURL(e,t,n,"image/svg+xml");return(async()=>{const e=await this.svg2canvas(c,t,n),r=e.getContext("2d"),l=r.getImageData(s,o,i,a);return e.remove(),l})()}}const utils=new ImageUtils;var Context=function(){function t(e,t){var n,s=Object.keys(t);for(n=0;n<s.length;n++)e=e.replace(new RegExp("\\{"+s[n]+"\\}","gi"),t[s[n]]);return e}function o(e){var t,n,s;if(!e)throw new Error("cannot create a random attribute name for an undefined object");n="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",t="";do{t="";for(s=0;s<12;s++)t+=n[Math.floor(Math.random()*n.length)]}while(e[t])return t}function c(e,t){var n,o,i,s={};e=e.split(","),t=t||10;for(n=0;n<e.length;n+=2)o="&"+e[n+1]+";",i=parseInt(e[n],t),s[o]="&#"+i+";";return s["\\xa0"]="&#160;",s}function l(e){var t={left:"start",right:"end",center:"middle",start:"start",end:"end"};return t[e]||t.start}function d(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}a=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),n={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},s=function(e,t){this.__root=e,this.__ctx=t},s.prototype.addColorStop=function(e,n){var o,i,s=this.__ctx.__createElement("stop");s.setAttribute("offset",e),toString(n).indexOf("rgba")!==-1?(i=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,o=i.exec(n),s.setAttribute("stop-color",t("rgb({r},{g},{b})",{r:o[1],g:o[2],b:o[3]})),s.setAttribute("stop-opacity",o[4])):s.setAttribute("stop-color",toString(n)),this.__root.appendChild(s)},i=function(e,t){this.__root=e,this.__ctx=t},e=function(t){var n,s={width:500,height:500,enableMirroring:!1};if(arguments.length>1?(n=s,n.width=arguments[0],n.height=arguments[1]):t?n=t:n=s,!(this instanceof e))return new e(n);this.width=n.width||s.width,this.height=n.height||s.height,this.enableMirroring=n.enableMirroring!==0[0]?n.enableMirroring:s.enableMirroring,this.canvas=this,this.__document=n.document||document,n.ctx?this.__ctx=n.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__styleStack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.resetTransform(),this.__options=n,this.__id=Math.random().toString(16).substring(2,8),this.__debug(`new`,t)},e.prototype.__debug=function(...e){if(!this.__options.debug)return;console.debug(`svgcanvas#${this.__id}:`,...e)},e.prototype.__createElement=function(e,t,n){typeof t=="undefined"&&(t={});var o,i,s=this.__document.createElementNS("http://www.w3.org/2000/svg",e),a=Object.keys(t);n&&(s.setAttribute("fill","none"),s.setAttribute("stroke","none"));for(o=0;o<a.length;o++)i=a[o],s.setAttribute(i,t[i]);return s},e.prototype.__setDefaultStyles=function(){var e,t,s=Object.keys(n);for(e=0;e<s.length;e++)t=s[e],this[t]=n[t].canvas},e.prototype.__applyStyleState=function(e){var t,n,s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],this[n]=e[n]},e.prototype.__getStyleState=function(){var e,t,s={},o=Object.keys(n);for(e=0;e<o.length;e++)t=o[e],s[t]=this[t];return s},e.prototype.__applyTransformation=function(e,t){const{a:n,b:s,c:o,d:i,e:a,f:r}=t||this.getTransform();e.setAttribute("transform",`matrix(${n} ${s} ${o} ${i} ${a} ${r})`)},e.prototype.__applyStyleToCurrentElement=function(e){var o,a,c,l,d,u,h,m,p,g,v,b,j,r=this.__currentElement,f=this.__currentElementsToStyle;f&&(r.setAttribute(e,""),r=f.element,f.children.forEach(function(t){t.setAttribute(e,"")})),l=Object.keys(n);for(c=0;c<l.length;c++)if(a=n[l[c]],o=this[l[c]],a.apply)if(o instanceof i){if(o.__ctx)for(u=0;u<o.__ctx.__defs.childNodes.length;u++)p=o.__ctx.__defs.childNodes[u],m=p.getAttribute("id"),this.__ids[m]=m,this.__defs.appendChild(p);r.setAttribute(a.apply,t("url(#{id})",{id:o.__root.getAttribute("id")}))}else if(o instanceof s)r.setAttribute(a.apply,t("url(#{id})",{id:o.__root.getAttribute("id")}));else if(a.apply.indexOf(e)!==-1&&a.svg!==o)if((a.svgAttr==="stroke"||a.svgAttr==="fill")&&o&&o.indexOf("rgba")!==-1)j=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,d=j.exec(o),r.setAttribute(a.svgAttr,t("rgb({r},{g},{b})",{r:d[1],g:d[2],b:d[3]})),g=d[4],v=this.globalAlpha,v!=null&&(g*=v),r.setAttribute(a.svgAttr+"-opacity",g);else{if(h=a.svgAttr,l[c]==="globalAlpha"){if(h=e+"-"+a.svgAttr,r.getAttribute(h))continue}else l[c]==="lineWidth"&&(b=this.__getTransformScale(),o=o*Math.max(b.x,b.y));r.setAttribute(h,o)}},e.prototype.__closestGroupOrSvg=function(e){return e=e||this.__currentElement,e.nodeName==="g"||e.nodeName==="svg"?e:this.__closestGroupOrSvg(e.parentNode)},e.prototype.getSerializedSvg=function(e){var n,s,o,i,r,t=(new XMLSerializer).serializeToString(this.__root),c=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi;if(c.test(t)&&(t=t.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e){s=Object.keys(a);for(n=0;n<s.length;n++)o=s[n],r=a[o],i=new RegExp(o,"gi"),i.test(t)&&(t=t.replace(i,r))}return t},e.prototype.getSvg=function(){return this.__root},e.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e;const n=this.__getStyleState();this.__debug("save style",n),this.__styleStack.push(n),this.__transformMatrixStack||(this.__transformMatrixStack=[]),this.__transformMatrixStack.push(this.getTransform())},e.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__styleStack.pop();this.__debug("restore style",e),this.__applyStyleState(e),this.__transformMatrixStack&&this.__transformMatrixStack.length>0&&this.setTransform(this.__transformMatrixStack.pop())},e.prototype.beginPath=function(){var e,t;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),t=this.__closestGroupOrSvg(),t.appendChild(e),this.__currentElement=e},e.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;e.nodeName==="path"?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},e.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},e.prototype.moveTo=function(e,n){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:e,y:n},this.__addPathCommand(t("M {x} {y}",{x:this.__matrixTransform(e,n).x,y:this.__matrixTransform(e,n).y}))},e.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},e.prototype.lineTo=function(e,n){this.__currentPosition={x:e,y:n},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(t("L {x} {y}",{x:this.__matrixTransform(e,n).x,y:this.__matrixTransform(e,n).y})):this.__addPathCommand(t("M {x} {y}",{x:this.__matrixTransform(e,n).x,y:this.__matrixTransform(e,n).y}))},e.prototype.bezierCurveTo=function(e,n,s,o,i,a){this.__currentPosition={x:i,y:a},this.__addPathCommand(t("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:this.__matrixTransform(e,n).x,cp1y:this.__matrixTransform(e,n).y,cp2x:this.__matrixTransform(s,o).x,cp2y:this.__matrixTransform(s,o).y,x:this.__matrixTransform(i,a).x,y:this.__matrixTransform(i,a).y}))},e.prototype.quadraticCurveTo=function(e,n,s,o){this.__currentPosition={x:s,y:o},this.__addPathCommand(t("Q {cpx} {cpy} {x} {y}",{cpx:this.__matrixTransform(e,n).x,cpy:this.__matrixTransform(e,n).y,x:this.__matrixTransform(s,o).x,y:this.__matrixTransform(s,o).y}))};var e,n,s,i,a,r=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};return e.prototype.arcTo=function(e,t,n,s,o){var i,a,c,l,u,h,m,p,g,v,b,j,y,d=this.__currentPosition&&this.__currentPosition.x,f=this.__currentPosition&&this.__currentPosition.y;if(typeof d=="undefined"||typeof f=="undefined")return;if(o<0)throw new Error("IndexSizeError: The radius provided ("+o+") is negative.");if(d===e&&f===t||e===n&&t===s||o===0){this.lineTo(e,t);return}if(a=r([d-e,f-t]),i=r([n-e,s-t]),a[0]*i[1]===a[1]*i[0]){this.lineTo(e,t);return}g=a[0]*i[0]+a[1]*i[1],v=Math.acos(g<0?-g:g),l=r([a[0]+i[0],a[1]+i[1]]),u=o/Math.sin(v/2),h=e+u*l[0],m=t+u*l[1],c=[-a[1],a[0]],b=[i[1],-i[0]],p=function(e){var t=e[0],n=e[1];return n>=0?Math.acos(t):-Math.acos(t)},j=p(c),y=p(b),this.lineTo(h+c[0]*o,m+c[1]*o),this.arc(h,m,o,j,y)},e.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},e.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},e.prototype.rect=function(e,t,n,s){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+s),this.lineTo(e,t+s),this.lineTo(e,t),this.closePath()},e.prototype.roundRect=function(e,t,n,s,o){this.__currentElement.nodeName!=="path"&&this.beginPath();let i,a,r,c;typeof o=="number"?(i=o,a=o,r=o,c=o):[i,a,r,c]=o,this.moveTo(e+i,t),this.arcTo(e+n,t,e+n,t+s,a),this.arcTo(e+n,t+s,e,t+s,r),this.arcTo(e,t+s,e,t,c),this.arcTo(e,t,e+n,t,i),this.closePath()},e.prototype.fillRect=function(e,t,n,s){let{a:i,b:a,c:r,d:c,e:l,f:d}=this.getTransform();JSON.stringify([i,a,r,c,l,d])===JSON.stringify([1,0,0,1,0,0])&&e===0&&t===0&&n===this.width&&s===this.height&&this.__clearCanvas();var o=this.__createElement("rect",{x:e,y:t,width:n,height:s},!0),u=this.__closestGroupOrSvg();u.appendChild(o),this.__currentElement=o,this.__applyTransformation(o),this.__applyStyleToCurrentElement("fill")},e.prototype.strokeRect=function(e,t,n,s){var o=this.__createElement("rect",{x:e,y:t,width:n,height:s},!0),i=this.__closestGroupOrSvg();i.appendChild(o),this.__currentElement=o,this.__applyTransformation(o),this.__applyStyleToCurrentElement("stroke")},e.prototype.__clearCanvas=function(){var e=this.__root.childNodes[1];this.__root.removeChild(e),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.__groupStack=[]},e.prototype.clearRect=function(e,t,n,s){let{a:i,b:a,c:r,d:c,e:l,f:d}=this.getTransform();if(JSON.stringify([i,a,r,c,l,d])===JSON.stringify([1,0,0,1,0,0])&&e===0&&t===0&&n===this.width&&s===this.height){this.__clearCanvas();return}var u=this.__closestGroupOrSvg(),o=this.__createElement("rect",{x:e,y:t,width:n,height:s,fill:"#FFFFFF"},!0);this.__applyTransformation(o),u.appendChild(o)},e.prototype.createLinearGradient=function(e,t,n,i){var a=this.__createElement("linearGradient",{id:o(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new s(a,this)},e.prototype.createRadialGradient=function(e,t,n,i,a,r){var c=this.__createElement("radialGradient",{id:o(this.__ids),cx:i+"px",cy:a+"px",r:r+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(c),new s(c,this)},e.prototype.__applyText=function(e,t,n,s){r=document.createElement("span"),r.setAttribute("style","font:"+this.font);var a,r,i=r.style,c=this.__closestGroupOrSvg(),o=this.__createElement("text",{"font-family":i.fontFamily,"font-size":i.fontSize,"font-style":i.fontStyle,"font-weight":i.fontWeight,"text-decoration":this.__fontUnderline,x:t,y:n,"text-anchor":l(this.textAlign),"dominant-baseline":d(this.textBaseline)},!0);o.appendChild(this.__document.createTextNode(e)),this.__currentElement=o,this.__applyTransformation(o),this.__applyStyleToCurrentElement(s),this.__fontHref&&(a=this.__createElement("a"),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.__fontHref),a.appendChild(o),o=a),c.appendChild(o)},e.prototype.fillText=function(e,t,n){this.__applyText(e,t,n,"fill")},e.prototype.strokeText=function(e,t,n){this.__applyText(e,t,n,"stroke")},e.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},e.prototype.arc=function(e,n,s,o,i,a){if(o===i)return;o=o%(2*Math.PI),i=i%(2*Math.PI),o===i&&(i=(i+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var u,h,c=e+s*Math.cos(i),l=n+s*Math.sin(i),m=e+s*Math.cos(o),f=n+s*Math.sin(o),p=a?0:1,d=0,r=i-o;r<0&&(r+=2*Math.PI),a?d=r>Math.PI?0:1:d=r>Math.PI?1:0,u=Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),h=Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d),this.lineTo(m,f),this.__addPathCommand(t("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:s*u,ry:s*h,xAxisRotation:0,largeArcFlag:d,sweepFlag:p,endX:this.__matrixTransform(c,l).x,endY:this.__matrixTransform(c,l).y})),this.__currentPosition={x:c,y:l}},e.prototype.ellipse=function(e,n,s,o,i,a,r,c){if(a===r)return;d=this.__matrixTransform(e,n),e=d.x,n=d.y,u=this.__getTransformScale(),s=s*u.x,o=o*u.y,i=i+this.__getTransformRotation(),a=a%(2*Math.PI),r=r%(2*Math.PI),a===r&&(r=(r+2*Math.PI-.001*(c?-1:1))%(2*Math.PI));var d,u,p,m=e+Math.cos(-i)*s*Math.cos(r)+Math.sin(-i)*o*Math.sin(r),f=n-Math.sin(-i)*s*Math.cos(r)+Math.cos(-i)*o*Math.sin(r),g=e+Math.cos(-i)*s*Math.cos(a)+Math.sin(-i)*o*Math.sin(a),v=n-Math.sin(-i)*s*Math.cos(a)+Math.cos(-i)*o*Math.sin(a),b=c?0:1,h=0,l=r-a;l<0&&(l+=2*Math.PI),c?h=l>Math.PI?0:1:h=l>Math.PI?1:0,p=this.__transformMatrix,this.resetTransform(),this.lineTo(g,v),this.__transformMatrix=p,this.__addPathCommand(t("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:s,ry:o,xAxisRotation:i*(180/Math.PI),largeArcFlag:h,sweepFlag:b,endX:m,endY:f})),this.__currentPosition={x:m,y:f}},e.prototype.clip=function(){var e=this.__closestGroupOrSvg(),n=this.__createElement("clipPath"),s=o(this.__ids),i=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),n.setAttribute("id",s),n.appendChild(this.__currentElement),this.__defs.appendChild(n),e.setAttribute("clip-path",t("url(#{id})",{id:s})),e.appendChild(i),this.__currentElement=i},e.prototype.drawImage=function(){var s,o,i,a,r,c,l,d,u,h,m,p,v,b,t=Array.prototype.slice.call(arguments),n=t[0],g=0,f=0;if(t.length===3)h=t[1],u=t[2],o=n.width,r=n.height,a=o,i=r;else if(t.length===5)h=t[1],u=t[2],a=t[3],i=t[4],o=n.width,r=n.height;else if(t.length===9)g=t[1],f=t[2],o=t[3],r=t[4],h=t[5],u=t[6],a=t[7],i=t[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);p=this.__closestGroupOrSvg(),this.__currentElement;const j=this.getTransform().translate(h,u);if(n instanceof e){if(l=n.getSvg().cloneNode(!0),l.childNodes&&l.childNodes.length>1){for(m=l.childNodes[0];m.childNodes.length;)v=m.childNodes[0].getAttribute("id"),this.__ids[v]=v,this.__defs.appendChild(m.childNodes[0]);d=l.childNodes[1],d&&(this.__applyTransformation(d,j),p.appendChild(d))}}else(n.nodeName==="CANVAS"||n.nodeName==="IMG")&&(s=this.__createElement("image"),s.setAttribute("width",a),s.setAttribute("height",i),s.setAttribute("preserveAspectRatio","none"),(g||f||o!==n.width||r!==n.height)&&(c=this.__document.createElement("canvas"),c.width=a,c.height=i,b=c.getContext("2d"),b.drawImage(n,g,f,o,r,0,0,a,i),n=c),this.__applyTransformation(s,j),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n.nodeName==="CANVAS"?n.toDataURL():n.getAttribute("src")),p.appendChild(s))},e.prototype.createPattern=function(t){var a,s=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),r=o(this.__ids);return s.setAttribute("id",r),s.setAttribute("width",t.width),s.setAttribute("height",t.height),s.setAttribute("patternUnits","userSpaceOnUse"),t.nodeName==="CANVAS"||t.nodeName==="IMG"?(a=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),a.setAttribute("width",t.width),a.setAttribute("height",t.height),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.nodeName==="CANVAS"?t.toDataURL():t.getAttribute("src")),s.appendChild(a),this.__defs.appendChild(s)):t instanceof e&&(s.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(s)),new i(s,this)},e.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},e.prototype.setTransform=function(e,t,n,s,o,i){e instanceof DOMMatrix?this.__transformMatrix=new DOMMatrix([e.a,e.b,e.c,e.d,e.e,e.f]):this.__transformMatrix=new DOMMatrix([e,t,n,s,o,i])},e.prototype.getTransform=function(){let{a:e,b:t,c:n,d:s,e:o,f:i}=this.__transformMatrix;return new DOMMatrix([e,t,n,s,o,i])},e.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)},e.prototype.scale=function(e,t){if(t===0[0]&&(t=e),e!=e||t!=t||!isFinite(e)||!isFinite(t))return;let n=this.getTransform().scale(e,t);this.setTransform(n)},e.prototype.rotate=function(e){let t=this.getTransform().multiply(new DOMMatrix([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]));this.setTransform(t)},e.prototype.translate=function(e,t){const n=this.getTransform().translate(e,t);this.setTransform(n)},e.prototype.transform=function(e,t,n,s,o,i){const a=this.getTransform().multiply(new DOMMatrix([e,t,n,s,o,i]));this.setTransform(a)},e.prototype.__matrixTransform=function(e,t){return new DOMPoint(e,t).matrixTransform(this.__transformMatrix)},e.prototype.__getTransformScale=function(){return{x:Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),y:Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d)}},e.prototype.__getTransformRotation=function(){return Math.atan2(this.__transformMatrix.b,this.__transformMatrix.a)},e.prototype.getImageData=function(e,t,n,s,o){return utils.getImageData(this.getSvg(),this.width,this.height,e,t,n,s,o)},e.prototype.drawFocusRing=function(){},e.prototype.createImageData=function(){},e.prototype.putImageData=function(){},e.prototype.globalCompositeOperation=function(){},e}();function SVGCanvasElement(e){this.ctx=new Context(e),this.svg=this.ctx.__root;var n=this.svg,s=this,t=document.createElement("div");t.style.display="inline-block",t.appendChild(n),this.wrapper=t,Object.defineProperty(this,"className",{get:function(){return t.getAttribute("class")||""},set:function(e){return t.setAttribute("class",e)}}),Object.defineProperty(this,"tagName",{get:function(){return"CANVAS"},set:function(){}}),["width","height"].forEach(function(e){Object.defineProperty(s,e,{get:function(){return n.getAttribute(e)|0},set:function(o){if(o!=o||typeof o=="undefined")return;return s.ctx[e]=o,n.setAttribute(e,o),t[e]=o}})}),["style","id"].forEach(function(e){Object.defineProperty(s,e,{get:function(){return t[e]},set:function(n){if(typeof n!="undefined")return t[e]=n}})}),["getBoundingClientRect"].forEach(function(e){s[e]=function(){return n[e]()}})}SVGCanvasElement.prototype.getContext=function(e){if(e!=="2d")throw new Error("Unsupported type of context for SVGCanvas");return this.ctx},SVGCanvasElement.prototype.toObjectURL=function(){var e=(new XMLSerializer).serializeToString(this.svg),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)},SVGCanvasElement.prototype.toDataURL=function(e,t,n){return utils.toDataURL(this.svg,this.width,this.height,e,t,n)},SVGCanvasElement.prototype.addEventListener=function(){return this.svg.addEventListener.apply(this.svg,arguments)},SVGCanvasElement.prototype.getElement=function(){return this.wrapper},SVGCanvasElement.prototype.getAttribute=function(e){return this.wrapper.getAttribute(e)},SVGCanvasElement.prototype.setAttribute=function(e,t){this.wrapper.setAttribute(e,t)}
